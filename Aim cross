-- Services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local camera = workspace.CurrentCamera

-- ===== UI SETUP =====
local gui = Instance.new("ScreenGui")
gui.Name = "MobileCrosshairGui"
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

-- Crosshair
local crosshair = Instance.new("Frame")
crosshair.Size = UDim2.new(0, 8, 0, 8)
crosshair.Position = UDim2.new(0.5, -4, 0.5, -4)
crosshair.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
crosshair.BorderSizePixel = 0
crosshair.AnchorPoint = Vector2.new(0, 0)
crosshair.Parent = gui

-- ===== HIGHLIGHT =====
local highlight = Instance.new("Highlight")
highlight.FillColor = Color3.fromRGB(255, 50, 50)
highlight.FillTransparency = 0.45
highlight.OutlineTransparency = 1
highlight.Enabled = false
highlight.Parent = gui

-- ===== TRACKING (MOBILE SAFE) =====
RunService.RenderStepped:Connect(function()
	local centerX = camera.ViewportSize.X / 2
	local centerY = camera.ViewportSize.Y / 2

	local ray = camera:ViewportPointToRay(centerX, centerY)

	local params = RaycastParams.new()
	params.FilterType = Enum.RaycastFilterType.Blacklist
	params.FilterDescendantsInstances = {player.Character}

	local result = workspace:Raycast(ray.Origin, ray.Direction * 1000, params)

	if result then
		local model = result.Instance:FindFirstAncestorOfClass("Model")
		local humanoid = model and model:FindFirstChildOfClass("Humanoid")

		if humanoid and model ~= player.Character then
			highlight.Adornee = model
			highlight.Enabled = true
		else
			highlight.Enabled = false
		end
	else
		highlight.Enabled = false
	end
end)
